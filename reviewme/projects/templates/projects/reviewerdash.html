{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title>Topics</title>
  <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


 <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
  <link rel="stylesheet" href="{% static 'css/helper.css' %}">
  </head>
<body>
 <nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="{% url 'home:landing' %}" class="brand-logo"><i class="material-icons left medium">assignment_turned_in</i>ReviewMe</a>
    {% if request.user.is_authenticated %}
      <ul class="right hide-on-med-and-down">
        <li class="active"><a href="#">{{request.user.username}}</a></li>
        <li><a  href="#">Reviwer Dashboard</a></li>
        <li><a  href="{% url 'users:logout_user' %}">Log Out</a></li>
      </ul>
    {% else %}
      <ul class="right hide-on-med-and-down">
        <li><a  class="btn deep-orange" href="{% url 'users:login_user' %}">Sign In</a></li>
      </ul>
    {% endif %}
      <ul id="nav-mobile" class="side-nav">
        <li><a href="#">Navbar Link</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>

<main>
  <div class="container margin-top-50">
    <div class="row left-align">
        <h3 class="thin">Available Projects</h3>
    </div>
    <div class="row margin-top-25">

        <div class="col s10">
          <table class="bordered">
            <thead>
              <tr>
                  <th data-field="id">Project Name</th>
                  <th data-field="name">Review Price</th>
                  <th data-field="name">Available Number</th>
              </tr>
            </thead>

            <tbody>
              {% for dictionary in available %}
              <tr>
                  <td>{{ dictionary.project__name }}</td>
                  <td>$ {{ dictionary.project__cost}}</td>
                  <td>{{ dictionary.count }}</td>
                  <td>
                      <form action="{% url 'projects:assign_submission' %}" method="post">
                      {% csrf_token %}
                      <input type="hidden" name="project_id" value="{{ dictionary.project__id }}">
                      <button class="btn waves-effect waves-light" type="submit" name="action">Start
                          <i class="material-icons right">trending_flat</i>
                       </button>
                      </form>
                  </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>

      </div>
  </div>
  </div>
  <div class="container margin-top-100">
    <div class="row left-align">
        <h3 class="thin">Assigned Projects</h3>
    </div>
    <div class="row margin-top-25">

        <div class="col s10">
          <table class="bordered">
            <thead>
              <tr>
                  <th data-field="id">Project Name</th>
                  <th data-field="name">Review Price</th>
                  <th data-field="id">Time Remaining</th>
              </tr>
            </thead>

            <tbody>
              {% for dictionary in assigned %}
                <tr>
                  <td>{{ dictionary.project__name }}</td>
                  <td>$ {{ dictionary.project__cost}}</td>
                  <td>{{ dictionary.time_remaining}} hr{{ dictionary.time_remaining | pluralize }}</td>
                  <td><a href="/content/submission/{{dictionary.id}}/" class="waves-effect waves-light btn">Resume
                        <i class="material-icons right">redo</i></a></td>
                </tr>
              {% endfor %}

            </tbody>
          </table>

      </div>
  </div>
  </div>
  </main>

   <footer class="page-footer transparent">
    <div class="footer-copyright deep-orange lighten-3">
      <div class="container">
      	<div class="row">
			<div class="col s12 m1">
				About
			</div>
			<div class="col s12 m1">
				Register
			</div>
			<div class="col s12 m1">
				Privacy
			</div>
			<div class="col s12 m1">
				Â©ReviewMe
			</div>
      	</div>
      </div>
    </div>
  </footer>



  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
  <script type="text/javascript" async>
    (function($){
  $(function(){

    $('.button-collapse').sideNav();

  }); // end of document ready
})(jQuery); // end of jQuery name space


   $(document).ready(function() {
    Materialize.updateTextFields();
  });

  </script>
  {% if messages %}
      {% for message in messages %}
        {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
        <script>Materialize.toast('{{ message }}', 4000, 'rounded teal')</script>
        {% else %}
        <script>Materialize.toast('{{ message }}', 4000, 'rounded deep-orange')</script>
        {% endif %}
      {% endfor %}
  </ul>
  {% endif %}

  </body>
</html>
